## 중복 전송을 100% 방지하는 것이 불가능한 이유는?
1. 분산 시스템의 불확실성 (ACK 소실)
- 분산 환경에서 알림 시스템이 제3자 서비스(Third-party service)나 단말로 메시지를 보낼 때, 다음과 같은 시나리오가 발생할 수 있습니다.
- 전송 성공: 알림 서버가 메시지를 보냈고, 수신 측(단말 또는 제3자 서비스)이 이를 정상적으로 수신했습니다.
- 응답(ACK) 실패: 수신 측이 "잘 받았다"는 응답(Acknowledgement)을 알림 서버로 보냈지만, 네트워크 오류 등으로 인해 이 응답이 전송 도중 유실되거나 지연됩니다.
- 재시도(Retry): 알림 서버 입장에서는 응답을 받지 못했으므로, 전송이 실패했다고 판단하고 같은 메시지를 다시 전송합니다.
- 결과: 수신 측은 이미 받은 메시지를 또 받게 되어 중복이 발생합니다.
2. 안정성(Reliability) 최우선
- 알림 시스템 설계에서 가장 중요한 요구사항 중 하나는 "어떤 상황에서도 알림이 소실되면 안 된다"는 것입니다. 데이터 손실을 막기 위해 전송 성공 여부가 불확실할 때는 무조건 재시도 메커니즘을 동작시키도록 설계하기 때문에, 필연적으로 중복 전송 가능성이 생기게 됩니다.
